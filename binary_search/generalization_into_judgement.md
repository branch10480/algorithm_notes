# 最適化問題を判定問題に

## 例題 - AtCoder Beginner Contest 023 D - 射撃王

> N個の風船がそれぞれ初期状態では高度 Hi の位置にあり、1秒ごとに Si だけ上昇します。
> 
> これら全ての風船を射撃によって割ります。ただし、Hi や Si は正の整数であるとします。
> 
> 競技開始時に1個風船を割ることができ、そこから一秒ごとに1個の風船を割ることができます。
> 
> 最終的に全ての風船を割りたいですが、どの順番に風船を割るかは自由に選ぶことができるものとします。
> 
> 各風船を割る時に発生するペナルティは、その時の風船の高度とします。
> 
> 最終的なペナルティは、各風船を割った時に発生するペナルティの最大値とします。
> 
> 最終的なペナルティとして考えられる最小値を求めてください。

## 解答への足掛かり

二分探索法の考え方に基づき、

```
整数 x が与えられた時に最終的なペナルティを x 以下にすることができるか
```

という **判定問題** として考えてみます。

各風船のペナルティを x 以下に抑える必要があることから、各風船を何秒以内に割るべきかが決まります。

その制限時間がもっとも差し迫っているところから優先的に割っていき、全ての風船が割れたならば `true` 、途中で高さが x を超えるような風船が現れたら `false` と判定することができます。

## 解答

```swift
let N = 5
let h = [1,2,3,4,5]
let s = h

// 二分探索
var left = 0
var right = 500
while right - left > 1 {
  let mid = (right + left) / 2

  // 判定 -- ここから --
  var ok = true
  var t = Array(repeating: 0, count: N)
  for i in 0..<N {
    // そもそも mid が初期高度より低かったら false
    if mid < h[i] {
      ok = false
      break
    }
    else {
      // (mid - h[i]): 残りの高度
      // s[i]: 1秒で上昇する高度
      //
      // t[i]: あと何秒猶予があるか表している
      t[i] = (mid - h[i]) / s[i]
    }
  }
  // 時間制限が差し迫っている（余裕がない）順にソート
  t.sort()
  for i in 0..<N {
    if t[i] < i {
      ok = false    // 時間切れ発生
      break
    }
  }
  // 判定 -- ここまで --

  // 後処理
  if ok {
    right = mid
  }
  else {
    left = mid
  }
}

// 結果出力
print(right)
```